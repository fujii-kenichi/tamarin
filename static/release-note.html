<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/common.css">
    <link rel="shortcut icon" href="image/connector-favicon.ico">
    <title>タマリンヘルプ - リリースノート</title>
</head>

<body>
    <div class="header">
        <img class="title" src="image/connector-icon-192x192.png">
        <div class="title">タマリンヘルプ - リリースノート</div>
    </div>
    <div class="main">
        <div class="message">
            このバージョンにおける問題や制限事項、とりあえず実装していないところやバグなどを記載します。現時点ではぜんぜん一般ユーザ向けではないのでご注意を。ちなみに★をつけた箇所は、たぶんMVP的な位置づけならまだいいけど、一般へのトライアルまでには直したほうがいいんじゃないかなと思っているところです。
        </div>
        <div class="message-title">V0.0.04</div>
        <hr>
        <div class="message">
            <div class="message-section">タマリン全体</div>
            <ol>
                <li>★PWAインストールの導線を改善：もう少し工夫しないとユーザにはやっぱりわかりずらい気がする</li>
                <li>★ヘルプの中身が書いてない：つくればいいいだけなんですがこういうのって結構大変で...</li>
                <li>★アイコンや音などの素材がオリジナルではない：いちおう今でもフリーのものを使っているけど...</li>
                <li>利用許諾ができてない：本当はプライバシーポリシーへのリンクとかも必要かも</li>
                <li>これはもちろん後ででいいんだけど、なにかしらのビジネスモデル実現に必要な課金管理用データをまだ全然もっていない：もし既存のUser/Mediaのスキーマに影響を与える内容なら(過去互換性が失われるので)早めに決めたほうがいいかも...</li>
                <li>デザインがださい：...ショック(泣) これでもがんばったつもりなんですが...でもやっぱり知識のある人に見てもらったほうがいいと思う</li>
                <li>せっかくWebなんだからアナリティクスとかいれたほうがいいとおもう：これは実際に使用するサービスを決めて対応したい</li>
            </ol>
            <div class="message-section">アプリの問題：コネクタ(Connector)</div>
            <ol>
                <li>★アカウントのパスワード変更やアカウント削除などの機能がない：Djangoにはあるのでちゃんと有効化しましょう...</li>
                <li>アカウントのメールアドレス認証がされない：これもDjangoにはあるので有効化の問題なんですが、やりならSMTP(メール配信サービス)をどうするのかを決めないといけないです..</li>
                <li>ユーザ名にASCII文字しかつかえない：これ意図的な仕様で、APIのURLにユーザ名が出る箇所があるというのと、同じ文字列であることを人間が確認しずらいというセキュリティの問題もあってこうしています...ちなみにもちろんカメラの"使用者"のところは日本語OKです！</li>
                <li>User,Media APIにおける認証済みリクエストにおける権限制約がちょっと緩い：Tokenに即したアカウントしかR/Wできないようにするといった措置に強化する</li>
            </ol>
            <div class="message-section">アプリの問題：タマリンカメラ(Camera)</div>
            <ol>
                <li>★画面の回転(ポートレートモード)に対応していない：単に手が回ってないのでレスポンシブになってないってことだけど、ちなみにPWAでは画面の向きを固定できない感じ?</li>
                <li>★シャッターボタンがださい・押下時の効果がいまいち：これはCSSとかいじってもうちょっといい感じにできないかな～と思います</li>
                <li>★オフライン時の動作検証がまだ不十分：いちおうPWAとして最大限オフラインに対応できるようにしていますがまだまだ動作検証が不十分な気がする</li>
                <li>カメラの機能が生かせていない：フラッシュとかズームとか解像度とか、stream settingsとかあと初期化jsonをいじるといろいろできるようなのでそのうちガンバル！</li>
                <li>想定外のネットワークエラー時にわざと強制終了するようになっている：壊れたまま自動アップロードを繰り返してDOS攻撃にならないようにするためだが、この処理は一回なったらDebug画面からDBリセット(indexedDB削除)以外に解除の手段がないのでかなり改善の余地がある..</li>
                <li>PWAの仕様を完全には満たしていなくてservice workerがperiodic syncに対応していない環境(iOSとかiOSとかiOSなど)ではアプリが対話状態じゃないと写真がアップロードされない：これはiOS側がPWAにちゃんと対応してくれればいいだけの話ではあるのだけど、さてどうしましょうね...？</li>
            </ol>
            <div class="message-section">アプリの問題：タマリンク(Link)</div>
            <ol>
                <li>★タグの入力にエラーチェックがない：最大の文字長とか個数とか、HTML(CSS)Colorとして適切とどうかとか、ファイル名にしたときにファイルシステムが受け入れる文字だけとか、そのあたりを本当はチェックする必要があるのにまるっとさぼっている</li>
                <li>★ダウンロード時のフォルダ選択画面で「セキュリティがどうしたこうした」といわれて選べないフォルダがある：これはWeb FileSystem APIの仕様だけどなんとかもう少しできないでしょうかね？</li>
                <li>★写真の撮影時刻(これはEXIFではなくてタマリンカメラが生成している)が秒単位で同じ場合にはファイルを上書きしてしまう（前のファイルが失われる）：これはバグなんですが、これを回避するためにはファイル名に何かしら一意性のある情報を付加しないといけなくて、ちょっとめんどくさい...</li>
                <li>ダウンロード時に必ずファイルを上書きしてしまう：これはこのままでもいいような気もするけど、他にファイルシステム起因の問題が起きないかどうかあんまり確認できていない...</li>
                <li>オフラインだとエラー画面を出して起動しない・実行中にオフラインになるとエラー画面になって止まる：これは意図的な仕様で、タマリンクはオフラインでは動作しないです！</li>
                <li>MacのSafariで動かない：PWAの仕様にちゃんと対応してよApple!さん！...ってことでこれは仕様です！</li>
                <li>service workerを有効活用していない：本当はダウンロードはこっちに任せたほうがいいのかも？</li>
            </ol>
            <div class="message-section">実装の問題:全体</div>
            <ol>
                <li>★テストがない：いや～いまどきテストが無いって... はやめにテストをいれておいたほうがいいですよ本当に</li>
                <li>★定期セキュリティ診断を組み込む：まあいちおうそれなりに気を付けては作っていますが、公開サービスなのであればこのあたりをしっかりしておかないと心配</li>
                <li>ユーザが入力したパスワードをIndexedDBに(復号可能な暗号化をして)永続化している：特にオフライン運用が想定されるカメラで認証ダイアログをださないようにするための意図的な仕様なんだけど、この是非はちゃんと考えたほうがいいかも</li>
            </ol>
            <div class="message-section">実装の問題:Python/Django/PostgreSQL部分</div>
            <ol>
                <li>特にPythonのコメントがちょっと足りない：このままだといろいろ忘れちゃいそう...?</li>
                <li>Djangoの標準管理コンソールでユーザ管理がうまくできない：これ普通に処理をいれればいいだけなんですが、なかなか手が回らなくて...</li>
                <li>APIのバージョニングがされていない：たぶんDjango REST Frameworkのベストプラクティスを採用すればいいだけなんですが、まだ手つかず</li>
                <li>多言語化の対応が中途半端：今のところmodels.pyとsettings.pyと.htmlの3箇所を対応する必要があるのですが、言語カタログの使用にさっさと移行したいです</li>
                <li>DjangoなんだからどうしてBootstrapとかそのあたり使わないの？もうちょっとかっちょいいUIにしたいというときに導入したい...</li>
            </ol>
            <div class="message-section">実装の問題:JavaScript/HTML/CSS部分</div>
            <ol>
                <li>リフレッシュトークンの使用をさぼっている：いまはアクセストークンだけで処理していますが、これをちゃんとリフレッシュトークンも使うように変える</li>
                <li>CameraのDebug log機能で出力できない情報がある：これ手抜きのJson化で適当に凌いでいるけど、本当はちゃんとObjectをみてダンプできるようにしたい</li>
                <li>コメントとログを見直す：こっちはそれなりに入れておいたけど、一回冷静な目で見直したほうがいいかも...あとちゃんとTODO:タグをつけたところは改善すること!!</li>
                <li>静的解析すべき：minimizeとかもしたいけど、そもそも少し解析をしたほうがいい気がする、CIに組み込める？</li>
                <li>暗号化関連処理をWeb標準に変える：今はCryptoJSを使っているけど、PWAでWeb標準が期待できるのだからそっちに乗り換えるほうが安全性とか性能とかからみてよさそう</li>
                <li>imagecapture.jsを廃止したい：GoogleのpolyfiilでImageCpature APIに未対応のブラウザのためのものなのではやくやめたい</li>
            </ol>
        </div>
    </div>
</body>

</html>