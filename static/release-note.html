<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/common.css">
    <link rel="shortcut icon" href="image/connector-favicon.ico">
    <title>タマリンヘルプ - リリースノート</title>
</head>

<body>
    <div class="header">
        <img class="title" src="image/connector-icon-192x192.png">
        <h1>タマリンヘルプ - リリースノート</h1>
    </div>
    <div class="main">
        <h2>0.0.01B</h2>
        <p>
            このバージョンにおける問題や制限事項、とりあえず実装していないところやバグなどを記載します。ちなみに★をつけた箇所は直したほうがいいんじゃないかなと思っているところです。
        </p>
        <h3>タマリン全体</h3>
        <ol>
            <li>★PWAインストールの導線を改善：もう少し工夫しないとユーザにはやっぱりわかりずらい気がする.</li>
            <li>★ヘルプの中身が書いてない：つくればいいいだけなんですがこういうのって結構大変で...</li>
            <li>★アイコンや音などをもっと素敵なものにする；これが結構難しい.</li>
            <li>利用許諾ができてない：本当はプライバシーポリシーへのリンクとかも必要かも.</li>
            <li>これはもちろん後ででいいんだけど、なにかしらのビジネスモデル実現に必要な課金管理用データをまだ全然もっていない：もし既存のUser/Mediaのスキーマに影響を与える内容なら(過去互換性が失われるので)早めに改修したほうがいいかも...</li>
            <li>デザインがださい：...ショック(泣) これでもがんばったつもりなんですが...でもやっぱり知識のある人に見てもらったほうがいいと思う.</li>
            <li>せっかくWebなんだからGAとかいれたほうがいいとおもう：これは実際に使用するサービスを決めて対応したい.</li>
            <li>使える環境(ブラウザやプラットフォーム)かどうかのちゃんとしたチェックをさぼっている.</li>
        </ol>
        <h3>コネクタ(Connector)</h3>
        <ol>
            <li>★アカウントのパスワード変更やアカウント削除などの機能がない：Djangoにはあるのでちゃんと有効化する...</li>
            <li>アカウントのメールアドレス認証がされない：これもDjangoにはあるので有効化の問題なんですが、やりならSMTP(メール配信サービス)をどう処理するのかを決めないといけないです..</li>
            <li>ユーザ名にASCII文字しかつかえない：これ意図的な仕様で、APIのURLにユーザ名が出る箇所があるというのと、同じ文字列であることを人間が確認しずらいというセキュリティの問題もあってこうしています...ちなみにもちろんカメラの"使用者"のところは日本語OKです.</li>
            <li>User/Media APIにおける認証済みリクエストにおける権限制約がちょっと緩い：Tokenに即したアカウントしかデータのR/Wができないようにするといった措置に強化する.</li>
        </ol>
        <h3>タマリンカメラ(Camera)</h3>
        <ol>
            <li>★オフライン時の動作検証がまだ不十分：いちおうPWAとしてオフラインに対応できるようにしていますがまだまだ動作検証が不十分.</li>
            <li>カメラの機能が生かせていない：フラッシュとかズームとか解像度とか、stream settingsとかあと初期化jsonをいじるといろいろできるようなのでそのうちやる.</li>
            <li>アプリが対話状態じゃないと写真がアップロードされない：これはperiodic syncが使えないかなと思って実装もしてみたけど時期尚早だったみたいです.</li>
            <li>想定外のネットワークエラー時にわざと強制終了するようになっている：壊れたまま自動アップロードを繰り返してDOS攻撃にならないようにするためだが、この処理は一回なったらDebug画面からDBリセット(indexedDB削除)以外に解除の手段がないのでかなり改善の余地がある.</li>
        </ol>
        <h3>タマリンク(Link)</h3>
        <ol>
            <li>★タグの入力にエラーチェックがない：最大の文字長とか個数とか、HTML(CSS)Colorとして適切とどうかとか、ファイル名にしたときにファイルシステムが受け入れる文字だけとか、そのあたりを本当はチェックする必要があるのにまるっとさぼっている.</li>
            <li>★ダウンロード時のフォルダ選択画面で「セキュリティがどうしたこうした」といわれて選べないフォルダがある：これはWeb FileSystem APIの仕様だけどなんとかもう少しできないでしょうか...</li>
            <li>★写真の撮影時刻(これはEXIFではなくてタマリンカメラが生成している)が秒単位で同じ場合にはファイルを上書きしてしまう（前のファイルが失われる）：これはバグなんですが、これを回避するためにはファイル名に何かしら一意性のある情報を付加しないといけなくて、ちょっとめんどくさい.</li>
            <li>オフラインだとエラー画面を出して起動しない・実行中にオフラインになるとエラー画面になって止まる：これは意図的な仕様で、タマリンクはオフラインでは動作しないです.</li>
            <li>MacのSafariで動かない：どうやらFileSystem APIがサポートされていない模様なのでこれは仕様.</li>
            <li>service workerを有効活用していない：本当はダウンロードはこっちに任せたほうがいいのかも.</li>
        </ol>
        <h3>実装の問題:全体</h3>
        <ol>
            <li>★テストがない：いや～いまどきテストが無いって... はやめにテストをいれておいたほうがいいですよ本当に.</li>
            <li>★定期セキュリティ診断を組み込む：まあいちおうそれなりに気を付けては作っていますが、サービス後悔想定なのであればこのあたりをしっかりしておかないと心配.</li>
            <li>ユーザが入力したパスワードをIndexedDBに(復号可能な暗号化をして)永続化している：特にオフライン運用が想定されるカメラで認証ダイアログをださないようにするための意図的な仕様なんだけど、この是非は一回ちゃんと考えたほうがいい.</li>
        </ol>
        <h3>実装の問題:Python/Django/PostgreSQL部分</h3>
        <ol>
            <li>Djangoの標準管理コンソールでユーザ管理がうまくできない：これ普通に処理をいれればいいだけなんですが、なかなか手が回らなくて...</li>
            <li>APIのバージョニングがされていない：たぶんDjango REST Frameworkのベストプラクティスを採用すればいいだけなんですがまだ手つかず.</li>
            <li>多言語化の対応が中途半端：今のところmodels.pyとsettings.pyと.htmlの3箇所を対応する必要があるのですが、Django標準に準拠した方式へさっさと移行したいです.</li>
        </ol>
        <h3>実装の問題:JavaScript/HTML/CSS部分</h3>
        <ol>
            <li>リフレッシュトークンの使用をさぼっている：いまはアクセストークンだけで処理していますが、これをちゃんとリフレッシュトークンも使うように変える.</li>
            <li>CameraのDebug log機能で出力できない情報がある：これ手抜きのJson化で適当に凌いでいるけど、本当はちゃんとObjectをみてダンプできるようにしたい.</li>
            <li>コメントとログを見直す：こっちはそれなりに入れておいたけど、一回冷静な目で見直したほうがいいかも...あとちゃんとTODO:タグをつけたところは改善すること.</li>
            <li>静的解析すべき：minimizeとかもしたいけど、そもそも少し解析をしたほうがいい気がする、CIに組み込むとか.</li>
            <li>暗号化関連処理をWeb標準に変える：今はCryptoJSを使っているけど、PWAでWeb標準が期待できるのだからそっちに乗り換えるほうが安全性とか性能とかからみてよさそう.</li>
            <li>imagecapture.jsを廃止したい：GoogleのpolyfiilでImageCpature APIに未対応のブラウザのためのものなので、はやくやめたい.</li>
        </ol>
    </div>
</body>

</html>